"use strict";

var Game = {
	canvas : undefined,
	canvasContext : undefined,   
}

function Sprite(spriteW, spriteH, cycle, frames, xPos, yPos) {
    this.spriteW = spriteW;
    this.spriteH = spriteH;
	this.cycle = cycle;
	this.frames = frames;
	this.xPos = xPos;
	this.yPos = yPos;
}
var charactersInPlay = [];
var Horse =  new Sprite(183,117,0,15,200,100);
var Player = new Sprite(100,60,0,9,300,400);
var Jellyfish = new Sprite(300, 50, 0, 15, 500, 350 );
charactersInPlay.push(Horse, Player, Jellyfish);



Game.start = function () 
{      
	Game.canvas = document.getElementById('myCanvas');
	Game.canvasContext = Game.canvas.getContext('2d');

	Horse.img = new Image();
		Horse.img.src = "assets/sprites/horse_sheet.png";
		Player.img = new Image();
		Player.img.src =  "assets/sprites/player.png";
		Jellyfish.img = new Image();
		Jellyfish.img.src = "assets/sprites/girlsprite.png";
	  Game.mainLoop();
};
document.addEventListener( 'DOMContentLoaded', Game.start);

Game.clearCanvas = function () {
    Game.canvasContext.clearRect(0, 0, Game.canvas.width, Game.canvas.height);
};

Game.mainLoop = function() {
    Game.clearCanvas();
    Game.update();
	Game.draw();
	// more frames smoother however this depends on the resources of the machine, if unable it will be laggy
	// maths 
    window.setTimeout(Game.mainLoop, 1000 / 10);
};

Game.update = function () 
{ 
	// ades says ' that remeber
	// game.cycle adding plus one everytime updatetakes places, then modulus - remainder divide by 'computer' number of frames
	Horse.cycle = (Horse.cycle + 1) % Horse.frames;
	Player.cycle =(Player.cycle + 1) % Player.frames;
	Jellyfish.cycle = (Jellyfish.cycle +1) % Jellyfish.frames;
};

Game.draw = function () 
{ 
		for(var i =0 ; i< charactersInPlay.length; i++){
			Game.canvasContext.drawImage(charactersInPlay[i].img,
				// source rectangle
				charactersInPlay[i].cycle * charactersInPlay[i].spriteW, 0, charactersInPlay[i].spriteW, 
				charactersInPlay[i].spriteH,
				// destination rectangle
				charactersInPlay[i].xPos, charactersInPlay[i].yPos, charactersInPlay[i].spriteW, charactersInPlay[i].spriteH);
		}
}